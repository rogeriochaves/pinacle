# `pinacle.yaml` Schema Reference

## Overview

`pinacle.yaml` is the configuration file that defines your pod's compute resources and service dependencies. This file is automatically generated when you create a pod and placed in your repository root.

The schema is intentionally minimal. Environment variables, secrets, volume mounts, and other runtime-specific configurations are managed separately and are not part of this file.

## File Location

```
/your-repository/pinacle.yaml
```

## Schema Version

Current schema version: **1.0**

## Fields

### `version`

**Type:** `string` (literal `"1.0"`)
**Required:** Yes
**Default:** `"1.0"`

The schema version. This field is used to ensure compatibility with future schema changes.

```yaml
version: "1.0"
```

### `name`

**Type:** `string`
**Required:** No
**Default:** Repository name

Human-readable identifier for the pod. Used in the Pinacle dashboard and CLI output.

```yaml
name: my-application
```

### `tier`

**Type:** `enum`
**Required:** No
**Default:** `dev.small`

Resource allocation tier. Determines CPU cores, memory (GB), and storage (GB) allocated to the pod.

**Valid values:**
- `dev.small` - 0.5 CPU, 1GB RAM, 10GB storage
- `dev.medium` - 1 CPU, 2GB RAM, 20GB storage
- `dev.large` - 2 CPU, 4GB RAM, 40GB storage
- `dev.xlarge` - 4 CPU, 8GB RAM, 80GB storage

```yaml
tier: dev.medium
```

### `services`

**Type:** `array<string>`
**Required:** No
**Default:** `["claude-code", "vibe-kanban", "code-server"]`

List of service identifiers to provision in the pod. Services are defined in the Pinacle service registry and include development tools, AI assistants, databases, and other infrastructure components.

**Available services:**
- `claude-code` - Claude AI coding assistant
- `openai-codex` - OpenAI Codex coding assistant
- `cursor-cli` - Cursor AI coding assistant
- `gemini-cli` - Google Gemini coding assistant
- `code-server` - VS Code (browser-based)
- `vibe-kanban` - Kanban board for task management
- `web-terminal` - Web-based terminal
- `postgres` - PostgreSQL database
- `redis` - Redis key-value store
- `jupyter` - Jupyter notebook server

```yaml
services:
  - claude-code
  - code-server
  - postgres
```

### `template`

**Type:** `string`
**Required:** No
**Default:** `null`

Template identifier used during pod creation. This is a reference field for the Pinacle UI and does not affect pod provisioning. Templates provide preset configurations for common frameworks (Next.js, Python, etc.) but the actual pod configuration is determined by the other fields in this file.

```yaml
template: nextjs
```

## Complete Example

```yaml
# Pinacle Pod Configuration
# https://pinacle.dev/docs/pinacle-yaml

# Available tiers: dev.small, dev.medium, dev.large, dev.xlarge
# Available services: code-server, vibe-kanban, claude-code, openai-codex, cursor-cli, gemini-cli, web-terminal, postgres, redis, jupyter

version: "1.0"
name: my-nextjs-app
template: nextjs
tier: dev.large
services:
  - openai-codex
  - code-server
  - postgres
  - redis
```

## Minimal Example

```yaml
version: "1.0"
tier: dev.small
services:
  - claude-code
  - web-terminal
```

## Validation

The schema is validated using Zod. Invalid configurations will produce specific error messages:

- **Invalid tier:** `"tier" must be one of: dev.small, dev.medium, dev.large, dev.xlarge`
- **Invalid service:** `"services[0]" is not a valid service identifier`
- **Missing version:** `"version" is required`

## Relationship to Environment Variables

Environment variables and secrets are **not** stored in `pinacle.yaml`. These are managed separately in the Pinacle database and can be attached to pods as reusable Environment Profiles.

This separation ensures:
1. Sensitive data is not committed to version control
2. The same `pinacle.yaml` can be reused across environments (dev/staging/prod)
3. Secrets can be shared across multiple pods without duplication

See [Environment Profiles](/docs/env-profiles) for managing environment variables and secrets.

## Modifications

You can manually edit `pinacle.yaml` and commit changes to your repository. When reconnecting the repository to Pinacle, the updated configuration will be detected and applied.

**Note:** Changing the tier or adding/removing services requires reprovisioning the pod. This operation will cause downtime.

## Related Documentation

- [Service Registry](/docs/services) - Complete list of available services and their specifications
- [Resource Tiers](/docs/tiers) - Detailed tier specifications and pricing
- [Environment Profiles](/docs/env-profiles) - Managing secrets and environment variables
- [Templates](/docs/templates) - Pre-configured templates for common frameworks
